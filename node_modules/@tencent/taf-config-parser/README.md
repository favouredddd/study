# taf-config-parser
taf平台配置文件解析器

## Installation
```sh
$ tnpm install @tencent/taf-config-parser
```

## API

### parseFile(sFilePath, [encoding, callback])
解析指定文件
* `sFilePath`: 文件名
* `encoding`: 文件编码类型。 (默认值: utf8)
* `callback`: 回调函数，回调函数的格式 function callback(ret, config){}, 其中ret为对象{code: 返回码，成功为0， 失败为-1, message: 描述, exception:如果成功为undefined，如果失败为事件对象}， config为解析器本身

### parseText(sText)
解析字符串，并将解析的结果存于内部的_data属性中，可以通过get方法获取相应的值
* `sText`: 字符串
* `return`: true：解析成功, false: 解析失败

### get(key, DEFAULT_VALUE)
文件被解析之后，会将结果存储到一个对象中，通过get方法可以获取制定的值。注：如果配置文件/字符串中有相同的key，则get获取key对应的值时，不会获取所有的值，而是获取该key最后对应的那个值，也可以理解为对应相同的key后面的值覆盖前面的值。
* `key`: 需要取值的key值，格式为x1.x2.x3，其中x1，x2，x3依次为深层次的key，注：如果key值本身为x1.x2格式，取该key对应的值时需要写成<x1.x2>,具体使用参见例子。
* `DEFAULT_VALUE`: 取不到结果的默认值

### getDomain(key, DEFAULT_VALUE)
获取制定key对应的值中类型为Object的属性数组
* `key`: key值。
* `DEFAULT_VALUE`: 取不到结果的默认值

### getDomainValue(key, DEFAULT_VALUE)
获取制定key对应的值中类型为Object的属性值数组
* `key`: key值。
* `DEFAULT_VALUE`: 取不到结果的默认值

#### getDomainLine(key, defaultValue)
获取key对应路径下的所有非空行
* `key`: key值。
* `defaultValue`: 取不到结果的默认值
* `return`: 数组

### data
通过该属性，可以获取文件解析的结果

## example

```js
var Configure = require('taf-config-parser');

var configure = new Configure();
configure.parseFile('./config.conf', 'utf8');

var data = configure.data;
console.log('### data: ', data);
console.log('### get: taf.application.server.<TRom.ThemeStoreServer.ThemeStore1ObjAdapter>: ', configure.get("taf.application.server.<TRom.ThemeStoreServer.ThemeStore1ObjAdapter>"));
console.log('### get: taf.application.server.local: ', configure.get('taf.application.server.local'));
console.log('### getDomain: taf.application.server: ', configure.getDomain('taf.application.server'));
console.log('### getDomainValue: taf.application.server: ', configure.getDomainValue('taf.application.server'));
```

具体例子参数examples目录下的main.js文件