var Taf  = require("../../../../protal.js").client;
var TRom = require("./NodeTafProxy").TRom;


Taf.initialize("./config.conf");

//不同的初始化方式
//var prx = Taf.stringToProxy(TRom.NodeTafProxy, Taf.configure.get("main.DevServer"));
//var prx = Taf.stringToProxy(TRom.NodeTafProxy, Taf.configure.get("main.ProxyServer"));
var servant=Taf.configure.get("main.LocalServer");
//TRom.NodeTafServer.NodeTafObj@tcp -h 127.0.0.1 -t 60000   -p 14002 :tcp -h 127.0.0.1   -p 14003 -t 60000
var prx = Taf.stringToProxy(TRom.NodeTafProxy, Taf.configure.get("main.LocalServer"));

var success = function (result) {
    //console.log("remote server endpoint:",             result.request.RemoteEndpoint.toString());
    //console.log("result.response.costtime:",           result.response.costtime);
    //console.log("LocalEndpoint",result.request.LocalEndpoint)
    console.log("result.response.return: ", new Date(),           result.response.arguments.sValue1,result.response.return);
    //console.log("result.response.arguments.sValue1:",  result.response.arguments.sValue1);
    //console.log("result.response.arguments.sValue1:",  result.response.arguments.sValue2);
}

var error = function (result) {
    console.error(result);
    console.log("result.response.error.code: ",        result.response.error.code);
    //console.log("result.response.error.message: ",     result.response.error.message);
}


//prx.getUsrName("kevintian").then(success, error).done();
prx.setTimeout(2000);
prx.getUsrName("kevintian").then(success, error);

