/**
 * Created by czzou on 16/10/19.
 */

var Promise=require("bluebird");

// Disable warnings, framework may be throw
// "a promise was rejected with a non-error"
// warning.
Promise.config({ warnings: false });

Promise.prototype.fail=Promise.prototype.catch;
var INTERNAL = function(){};
function deferResolve(v) {this.promise._resolveCallback(v);}
function deferReject(v) {this.promise._rejectCallback(v, false);}

Promise.defer = Promise.pending = function() {
    var promise = new Promise(INTERNAL);
    return {
        promise: promise,
        resolve: deferResolve,
        reject: deferReject
    };
};
module.exports=Promise;