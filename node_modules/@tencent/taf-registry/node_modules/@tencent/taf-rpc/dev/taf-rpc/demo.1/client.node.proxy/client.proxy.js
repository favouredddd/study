process.env.taf_rpc_path = "../../../../";
process.env.taf_stream   = "../../../../../taf-stream";

var Taf  = require(process.env.taf_rpc_path).client;
var TRom = require("./NodeJsCommProxy").TRom;

//使用配置文件初始化通信器
Taf.initialize("./config.conf");

//生成代理类
//var prx = Taf.stringToProxy(TRom.NodeJsCommProxy, Taf.configure.get("main.LocalServer"));
//var prx = Taf.stringToProxy(TRom.NodeJsCommProxy, Taf.configure.get("main.DevServer"));
var prx = Taf.stringToProxy(TRom.NodeJsCommProxy, Taf.configure.get("main.ProxyServer"));

var success = function (result) {

    console.log("result.response.costtime:",           result.response.costtime);
    console.log("result.response.return: ",            result.response.return);
    console.log("result.response.arguments.sValue1:",  result.response.arguments.sValue1);
    console.log("result.response.arguments.sValue1:",  result.response.arguments.sValue2);
}

var error = function (result) {
    console.log("result.error: ",   result.response.error.code);
    console.log("result.message: ", result.response.error.message);
}

prx.getUsrName("kevintian").then(success, error).done();
